<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="theme-color" content="#5865F2">
  <title>EXP â€” Interest Calculator</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .calc{max-width:760px;margin:70px auto;padding:26px;border-radius:14px}
    .form-row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    .form-row input, .form-row button, .form-row select{padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text);min-width:160px}
    .result{margin-top:18px;padding:14px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03)}
    .muted-block{color:var(--muted);font-size:13px;margin-top:6px}
  </style>
</head>
<body>

<header class="top-logo">
  <img src="IMG_1646.webp" alt="EXP Logo">
</header>

<main class="container">
  <section class="hero">
    <div class="logo">ðŸ’Ž EXP<span class="server-sub">Interest Calculator</span></div>
  </section>

  <article class="card calc">
    <h2 style="margin-top:0">Interest Calculator â€” 0.25% daily</h2>
    <p class="muted-block">Enter the number of diamonds (e.g. 2b for 2,000,000,000) and the number of days.</p>

    <div class="form-row" style="margin-top:14px">
      <label for="amount">Amount</label>
      <input id="amount" placeholder="e.g. 2b, 2500000, 3.5m" aria-label="Amount">

      <label for="days">Days</label>
      <input id="days" type="number" min="1" value="30" aria-label="Days">

      <button id="calc">Calculate</button>
    </div>

    <div id="output" class="result" aria-live="polite" style="display:none">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <div class="muted-block">Balance</div>
          <div class="big-balance" id="balanceDisplay">0</div>
        </div>
        <div style="width:40%">
          <div class="muted-block">Progress</div>
          <div class="progress-line" id="progressLine" style="width:0%"></div>
        </div>
      </div>

      <div class="chart-wrap">
        <svg class="chart-svg" id="chartSvg" viewBox="0 0 600 160" preserveAspectRatio="none">
          <polyline fill="none" stroke="rgba(88,101,242,0.9)" stroke-width="2" id="chartLine" points="" />
        </svg>
        <div class="sample-note" id="sampleNote"></div>
      </div>

      <table class="table-small" id="dataTable" style="display:none">
        <thead><tr><th>Day</th><th>Balance</th></tr></thead>
        <tbody></tbody>
      </table>
    </div>
  </article>

</main>

  <footer style="text-align:center;color:var(--muted);margin:40px 0">Â© 2026 EXP</footer>

<script>
const DISCORD_INVITE = "https://discord.gg/exp";
document.addEventListener('DOMContentLoaded',()=>{
  document.getElementById('calc').addEventListener('click',runCalc);
});

function parseAmount(s){
  if(!s) return 0;
  s = String(s).trim().toLowerCase().replace(/,/g,'');
  const suffix = s.slice(-1);
  if(['k','m','b','t'].includes(suffix)){
    const num = parseFloat(s.slice(0,-1));
    if(isNaN(num)) return 0;
    const map = {k:1e3,m:1e6,b:1e9,t:1e12};
    return num * map[suffix];
  }
  const val = parseFloat(s);
  return isNaN(val)?0:val;
}

function formatNumber(n){
  if(!isFinite(n)) return n;
  if(n>=1e9) return (n/1e9).toFixed(3).replace(/\.0+$/,'') + 'b';
  if(n>=1e6) return (n/1e6).toFixed(3).replace(/\.0+$/,'') + 'm';
  return Math.round(n).toLocaleString();
}

function runCalc(e){
  const amtStr = document.getElementById('amount').value;
  const days = Math.max(1, Math.floor(Number(document.getElementById('days').value) || 0));
  const principal = parseAmount(amtStr);
  const dailyRate = 0.25/100; // 0.25%
  if(principal<=0){
    show('Please enter a valid amount.');
    return;
  }
  const final = principal * Math.pow(1 + dailyRate, days);
  const interest = final - principal;

  const out = document.getElementById('output');
  out.style.display = 'block';

  // animate counter
  animateCounter('balanceDisplay', principal, final, 1200);

  // progress line
  const progress = Math.min(100, (final - principal) / Math.max(1, final) * 100);
  document.getElementById('progressLine').style.width = Math.max(6, progress) + '%';

  // prepare per-day data (limit rows if too many days)
  const maxRows = 200;
  let step = 1;
  if(days > maxRows) step = Math.ceil(days / maxRows);
  const data = [];
  for(let d=0; d<=days; d++){
    if(d % step !== 0 && d !== days) continue;
    const val = principal * Math.pow(1 + dailyRate, d);
    data.push({d, val});
  }

  // draw chart
  drawChart(data);

  // fill table
  const table = document.getElementById('dataTable');
  const tbody = table.querySelector('tbody');
  tbody.innerHTML = '';
  data.forEach(row=>{
    const tr = document.createElement('tr');
    const tdDay = document.createElement('td'); tdDay.textContent = row.d;
    const tdBal = document.createElement('td'); tdBal.textContent = formatNumber(row.val);
    tr.appendChild(tdDay); tr.appendChild(tdBal);
    tbody.appendChild(tr);
  });
  table.style.display = 'table';
  document.getElementById('sampleNote').textContent = days > maxRows ? `Showing every ${step} day(s) (${data.length} rows)` : '';
}

// helper to set join link if needed
const joinFaq = document.getElementById('joinFaq');
if(joinFaq) joinFaq.href = DISCORD_INVITE;

// draw simple svg chart from data array [{d,val}]
function drawChart(data){
  const svg = document.getElementById('chartSvg');
  const w = 600, h = 160;
  if(!data.length) return;
  const vals = data.map(x=>x.val);
  const min = Math.min(...vals);
  const max = Math.max(...vals);
  const norm = v => {
    if(max === min) return h/2;
    return h - ((v - min)/(max - min))*(h-20) - 10;
  };
  const stepX = w / Math.max(1, data.length-1);
  const points = data.map((pt,i)=>{return `${(i*stepX).toFixed(2)},${norm(pt.val).toFixed(2)}`}).join(' ');
  document.getElementById('chartLine').setAttribute('points', points);
}

// animate numeric counter
function animateCounter(id, from, to, duration){
  const el = document.getElementById(id);
  const start = performance.now();
  const r = () => {
    const now = performance.now();
    const t = Math.min(1, (now-start)/duration);
    const cur = from + (to-from)*easeOutCubic(t);
    el.textContent = formatNumber(cur);
    if(t < 1) requestAnimationFrame(r);
  };
  requestAnimationFrame(r);
}
function easeOutCubic(t){return 1 - Math.pow(1-t,3)}
</script>

</body>
</html>
